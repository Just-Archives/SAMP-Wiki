<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="keywords" content="Amx Functions" />
<link rel="shortcut icon" href="../favicon.html" />
		<title>Amx Functions - SA-MP Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "../skins/monobook/main8f14.css?7"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "../skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "../skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "../skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "../skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="../skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '../skins';</script>
		<script type="text/javascript" src="../skins/common/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="../raw/gen.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "../raw/MediaWiki_Common.css";
@import "../raw/MediaWiki_Monobook.css";
@import "../raw/gen.css";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body  class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Amx Functions</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From SA-MP Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<div style="max-width: 750px; width:auto;">
<table style="padding: 5px; background-color: #FFEAEA; border-left: 10px solid #FCA9A9;">

<tr>
<td align="center" style="padding-right:10px; padding-left:5px; border-right:1px solid #FCA9A9;"><a href="Image_32px-Circle-style-warning.png.html" class="image" title="Image:32px-Circle-style-warning.png"><img src="../upload/5/57/32px-Circle-style-warning.png" alt="Image:32px-Circle-style-warning.png" width="32" height="32" longdesc="Image_32px-Circle-style-warning.png.html" /></a><br />
<p><strong>Important<br />Note</strong>
</p>
</td><td align="left" style="padding-left:10px; padding-right:7px;"><span style="font-size:14px;"> This article isnt finished! You can contribute to it by copy/pasting the following functions from the PAWN implementers guide (Section: "The abstract machine" -> "Function Reference"): <b>amx_Register</b>, <b>amx_GetAddr</b>,<b> amx_StrLen</b>, <b>amx_GetString</b>, <b>amx_StrParam</b>,<b> amx_SetString</b>, <b>amx_PushString</b>, <b>amx_PushArray</b>, <b>amx_Push</b>, <b>amx_Exec</b>, and <b>amx_Release</b>!</span>
</td></tr></table>
</div>
<p><br />
</p><p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="#Amx_Functions"><span class="tocnumber">1</span> <span class="toctext">Amx Functions</span></a>
<ul>
<li class='toclevel-2'><a href="#amx_Allot"><span class="tocnumber">1.1</span> <span class="toctext">amx_Allot</span></a></li>
<li class='toclevel-2'><a href="#amx_ctof"><span class="tocnumber">1.2</span> <span class="toctext">amx_ctof</span></a></li>
<li class='toclevel-2'><a href="#amx_Exec"><span class="tocnumber">1.3</span> <span class="toctext">amx_Exec</span></a></li>
<li class='toclevel-2'><a href="#amx_FindPublic"><span class="tocnumber">1.4</span> <span class="toctext">amx_FindPublic</span></a></li>
<li class='toclevel-2'><a href="#amx_ftoc"><span class="tocnumber">1.5</span> <span class="toctext">amx_ftoc</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: Amx Functions">edit</a>]</div><a name="Amx_Functions"></a><h1>Amx Functions</h1>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: amx_Allot">edit</a>]</div><a name="amx_Allot"></a><h2>amx_Allot</h2>
<p>Reserve heap space in the abstract machine
</p>
<b>Parameters:</b><div class="parameters" style="padding:2px; padding-left:5px; margin-left:35px; margin-top: 10px; font-family: Courier New; border-bottom: 1px solid #AAAAAA; border-right: 1px solid #AAAAAA; width: 75%; background-color: #f4f8fb">(AMX *amx, int cells, cell *amx_addr, cell **phys_addr)<br /></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">amx</td><td style="vertical-align:top;">The abstract machine.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">cells</td><td style="vertical-align:top;">The number of cells to reserve.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">amx_addr</td><td style="vertical-align:top;">The address of the allocated cell as the pawn program
(that runs in the abstract machine) can access it.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">phys_addr</td><td style="vertical-align:top;">The address of the cell for C/C++ programs to access..</td></tr></table></div>
<p><br />
<b>Return Values:</b><br />
</p>
<div style="padding-left:35px;">An error code or AMX_ERR_NONE<br /></div>
<p><br />
<b>Note:</b>
</p><p>In earlier releases of pawn, arrays and strings had to be passed to
a script after explicitly allocating memory for it on the amx stack.
In the current release, this functionality has been largely replaced
by the functions amx_PushArray and amx_PushString.
A pawn function can only access memory inside its abstract ma-
chine. If a parameter is to be passed “by reference” to a pawn
function, one must pass the address of that parameter to amx_Exec.
In addition, that address itself must be within the address range of
the abstract machine too. An added complexity is that the abstract
machine uses addresses that are relative to the data section of the
abstract machine, and the host program uses address relative to the
environment that the operating system gives it.
amx_Allot allocates memory cells inside the abstract machine and
it returns two addresses. The amx_addr parameter is the address of
the variable relative to the “data section” of the abstract machine;
this is the value you should pass to amx_Exec (via amx_Push). Pa-
rameter phys_addr holds the address relative to the host program’s
address space. So a C/C++ program can use this address and write
into the allocated memory.
After amx_Exec returns, you may inspect the memory block (the
pawn function called by amx_Exec may have written into it) and
finally release it by calling amx_Release.
</p><p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: amx_ctof">edit</a>]</div><a name="amx_ctof"></a><h2>amx_ctof</h2>
<p>Cast “cell” to “float”
</p>
<b>Parameters:</b><div class="parameters" style="padding:2px; padding-left:5px; margin-left:35px; margin-top: 10px; font-family: Courier New; border-bottom: 1px solid #AAAAAA; border-right: 1px solid #AAAAAA; width: 75%; background-color: #f4f8fb">([cell] c)<br /></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">c</td><td style="vertical-align:top;">The value to cast from “cell” type to “float”.</td></tr></table></div>
<p><br />
<b>Return Values:</b><br />
</p>
<div style="padding-left:35px;">The same bit pattern, but now as a floating point type<br /></div>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: amx_Exec">edit</a>]</div><a name="amx_Exec"></a><h2>amx_Exec</h2>
<p>Run code
</p>
<b>Parameters:</b><div class="parameters" style="padding:2px; padding-left:5px; margin-left:35px; margin-top: 10px; font-family: Courier New; border-bottom: 1px solid #AAAAAA; border-right: 1px solid #AAAAAA; width: 75%; background-color: #f4f8fb">(AMX *amx, long *retval, int index)<br /></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">amx</td><td style="vertical-align:top;">The abstract machine from which to call a function.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">retval</td><td style="vertical-align:top;">Will hold the return value of the called function upon
<p>return. This parameter may be NULL if you are not
</p>
interested in the return value.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">index</td><td style="vertical-align:top;">An index into the “public function table”; it indicates
<p>the function to execute. See amx_FindPublic formore
information. Use AMX_EXEC_MAIN to start executing
at the main function, and AMX_EXEC_CONT to continue
</p>
execution from a “sleep state”.</td></tr></table></div>
<p><br />
<b>Return Values:</b><br />
</p>
<div style="padding-left:35px;">An error code or AMX_ERR_NONE<br /></div>
<p><br />
</p><p><b>Note:</b>
</p><p>This function runs the script, starting at the indicated function. It
calls the callback function for any native function call that the code
in the amx makes. amx_Exec assumes that all native functions are
correctly initialized with amx_Register.
</p><p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: amx_FindPublic">edit</a>]</div><a name="amx_FindPublic"></a><h2>amx_FindPublic</h2>
<p>Return the index of a public function
</p><p><br />
</p>
<b>Parameters:</b><div class="parameters" style="padding:2px; padding-left:5px; margin-left:35px; margin-top: 10px; font-family: Courier New; border-bottom: 1px solid #AAAAAA; border-right: 1px solid #AAAAAA; width: 75%; background-color: #f4f8fb">(AMX *amx, char *funcname, int *index)<br /></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">amx</td><td style="vertical-align:top;">The abstract machine from which to call a function.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">funcname</td><td style="vertical-align:top;">The name of the public function to find.</td></tr></table></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">index</td><td style="vertical-align:top;">Upon return, this parameter holds the index of the
requested public function.</td></tr></table></div>
<p><br />
<b>Return Values:</b><br />
</p>
<div style="padding-left:35px;">An error code or AMX_ERR_NONE<br /></div>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="Amx_Functions.html" title="Edit section: amx_ftoc">edit</a>]</div><a name="amx_ftoc"></a><h2>amx_ftoc</h2>
<p>Cast “float” to “cell”
</p>
<b>Parameters:</b><div class="parameters" style="padding:2px; padding-left:5px; margin-left:35px; margin-top: 10px; font-family: Courier New; border-bottom: 1px solid #AAAAAA; border-right: 1px solid #AAAAAA; width: 75%; background-color: #f4f8fb">([float] f)<br /></div>
<div class="param" style="padding-left:50px;"><table><tr><td style="vertical-align:top;width:150px;font-family:'Courier New'">f</td><td style="vertical-align:top;">The value to cast from “float” type to “cell”.</td></tr></table></div>
<p><br />
<b>Return Values:</b><br />
</p>
<div style="padding-left:35px;">The same bit pattern, but now as a “cell” type<br /></div>
<p><br />
<b>Note:</b>
</p><p>This <b>macro</b> casts a “float” type into a “cell” type without changing
the bit pattern. A normal type cast in C/C++ changes the memory
representation of the expression so that its numeric value in integer
format is the integral (truncated) value of the original rational value.
The pawn parser and abstract machine store floating point values in
a cell —when storing a floating point value in a cell, the bit pattern
must not be changed.
</p><div class="printfooter">
Retrieved from "<a href="http://localhost../wiki/Amx_Functions.html">http://localhost../wiki/Amx_Functions.html</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="Amx_Functions.html">Article</a></li>
				 <li id="ca-talk" class="new"><a href="Talk_Amx_Functions.html">Discussion</a></li>
				 <li id="ca-edit"><a href="Amx_Functions.html">Edit</a></li>
				 <li id="ca-history"><a href="Amx_Functions.html">History</a></li>
		</ul>
	</div>

	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="../wiki-archive.html">Main Page</a></li>
				<li id="n-help"><a href="Help_Contents.html">Help</a></li>
			</ul>
		</div>
	</div>
	
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="viewcount">This page has been accessed 11,750 times.</li>
				<li id="credits">This page was last modified 21:14, 8 November 2011 by SA-MP Wiki user User:. </li>
				<li id="privacy"><a href="SA-MP_Wiki_Privacy_policy.html" title="SA-MP Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="SA-MP_Wiki_About.html" title="SA-MP Wiki:About">About SA-MP Wiki</a></li>
				<li id="disclaimer"><a href="SA-MP_Wiki_General_disclaimer.html" title="SA-MP Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by forum in 70.42 secs. -->
</body></html>
